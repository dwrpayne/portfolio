{% extends "finance/../../../../portfolio/templates/base.html" %}
{% load mytags %}

{% block content %}
    <h2>Account Status</h2>
    <table class="table table-striped table-hover table-sm">
        <tr>
            <th>User</th>
            <th>Account</th>
            <th>First Activity</th>
            <th>Most Recent Activity</th>
            <th>Today's Balance</th>
            <th>Actions</th>
        </tr>
        {% for account in accounts %}
            <tr>
                <td>{{ account.user.username }}</td>
                <td>{{ account.display_name }}</td>
                <td>{{ account.creation_date }}</td>
                <td>{{ account.activities.newest_date }}</td>
                <td>{{ account.cur_balance | currency}}</td>
                <td>
                    <button type="submit" class="refresh" data-refresh-type="sync-{{account.id}}">Sync Activities</button>&nbsp;&nbsp;&nbsp;
                    <button type="submit" class="refresh" data-refresh-type="activities-{{account.id}}">Regenerate Activities</button>&nbsp;&nbsp;&nbsp;
                    <button type="submit" class="refresh" data-refresh-type="holdings-{{account.id}}">Regenerate Holdings</button>
                </td>
            </tr>
        {% endfor %}
    </table>
{% endblock %}
