{% extends "base.html" %}
{% load mytags %}
{% load static %}
{% block title %} {{request.user.username}} {% endblock title %}
{% block content %}
<div class="row">
    <div class="col-sm-10" align="center">
        <h2>
            {% if view.prev_day %}
                <a href="{% url 'finance:snapshot' %}?day={{ view.prev_day }}"><<<</a>
            {% endif %}
            Portfolio view as of {{ view.get_day }}
            {% if view.next_day %}
                <a href="{% url 'finance:snapshot' %}?day={{ view.next_day }}">>>></a>
            {% endif %}
        </h2>
        {% include "finance/holdings.html" %}
    </div>
    <div class="col-sm-2">
        <h3>Jump to date:<br/></h3>
        <div type="text" id="datepicker"></div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        <h2>Activities on this day</h2>
        {% include "finance/activity_table.html" with show_account="true" show_security="true" %}
    </div>
</div>
{% endblock content %}
{% block footer_javascript_page %}
    <script type="text/javascript">
        $(function () {
            $('#datepicker').datepicker({
                dateFormat: "yy-mm-dd",
                changeMonth: true,
                changeYear: true,
                showButtonPanel: true,
                showOtherMonths: true,
                selectOtherMonths: true,
                minDate: -{{ view.inception_days_ago }},
                maxDate: 0,
                defaultDate: "{{ view.get_day.isoformat }}",
                onSelect: function(date) {
                    window.location.href = window.location.href.split('?')[0] + '?day=' + date;
                }
            });
        });
    </script>
{% endblock footer_javascript_page %}
