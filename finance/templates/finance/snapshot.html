{% extends "finance/base.html" %}
{% load mytags %}
{% load static %}
{% block title %} {{request.user.username}} {% endblock title %}
{% block content %}
<div class="row">
    <div class="col-sm-10" align="center">
        <h2>
            {% if prev_day %}
                <a href="{% url 'finance:snapshot' %}?day={{ prev_day }}"><<<</a>
            {% endif %}
            Portfolio view as of {{ day }}
            {% if next_day %}
                <a href="{% url 'finance:snapshot' %}?day={{ next_day }}">>>></a>
            {% endif %}
        </h2>
        {% include "finance/holdings.html" %}
    </div>
    <div class="col-sm-2">
        <div class="form-group">
            <form action="" id="date-submit-form" method="get">
                <label for="datepicker">See portfolio as of</label>
                <input type="text" class="form-control" id="datepicker" placeholder="{{ day }}" name="day">
                <button type="submit">Submit</button>
            </form>
        </div>
    </div>
</div>
<div class="row">
    <div class="col-sm-12">
        <h2>Activities on this day</h2>
        {% include "finance/activity_table.html" with show_account="true" show_security="true" %}
    </div>
</div>
{% endblock content %}
{% block footer_javascript_page %}
    <script type="text/javascript">
        $(function () {
            $('#datepicker').datepicker({
                dateFormat: "yy-mm-dd",
                changeMonth: true,
                changeYear: true,
                showButtonPanel: true,
                showOtherMonths: true,
                selectOtherMonths: true,
                minDate: -{{ inception_days_ago }},
                maxDate: 0,
                defaultDate: "{{ day.isoformat }}"
            });
        });
    </script>
{% endblock footer_javascript_page %}
