{% extends "templates/base.html" %}
{% load mytags %}
{% load static %}
{% block title %} {{view.symbol}} {% endblock title %}
{% block content %}
<div class="row" align="center">
    <h2>Annual Capital Gains Summary</h2>
    <br /><h3>All values converted to Canadian dollars.</h3>
</div>
<div class="row">
    <div class="col-sm-12">
        <table class="table table-striped table-hover">
            <thead>           
                <tr>
                    <th>Security</th>
                    {% for year in view.years %}
                        <th>{{ year }}</th>
                    {% endfor %}
                    <th>Pending</th>
                </tr>
            </thead>
            <tfoot>
                <tr>
                    <td>Total</td>
                    {% for value in view.total_gains %}
                        <td>{% if value %}{{ value | currency}}{% endif %}</td>
                    {% endfor %}
                    <td>{{ view.total_pending | currency}}</td>
                </tr>
            </tfoot>
            <tbody>
            {% for security, yearly_values in view.yearly_gains.items %}
                <tr>
                    <td><a href="{% url 'finance:capgainssec' security %}">{{security}}</a></td>
                    {% for value in yearly_values %}
                        <td>{% if value %}{{ value | currency}}{% endif %}</td>
                    {% endfor %}
                    <td>{{ view.pending_gains | lookup:security | currency}}</td>
                </tr>
            {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock content %}
